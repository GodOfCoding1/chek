(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(77),o=n.n(r),i=n(86),s=n(10),u=n(2),l=function(){return Object(u.jsx)("h1",{children:"not found"})},d=n(27),j=n.n(d),b=n(32),h=n(29),m=n(19),f=n(11),p=n(33),x=n.n(p),O=n(177),y=n(178),v=n(176);function g(e){return new Promise((function(t){var n=document.createElement("script");n.src=e,n.onload=function(){t(!0)},n.onerror=function(){t(!1)},document.body.appendChild(n)}))}var w=function(e){var t=e.amount,n=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("https://checkout.razorpay.com/v1/checkout.js");case 2:if(e.sent){e.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 6:x.a.post("".concat("http://localhost:5000","/payment/razorpay"),{amount:t,currency:"INR"}).then((function(e){console.log(e.data);var t=localStorage.getItem("user"),n={key:e.data.key,currency:e.data.currency,amount:e.data.amount.toString(),order_id:e.data.id,name:"Pay Bill",handler:function(e){window.alert("Payment made successfully.")}};t&&(n.prefill={name:t.name,email:t.email,phone_number:t.cust_ph_num}),new window.Razorpay(n).open()})).catch((function(e){window.alert("Some error occured in connecting to RazorPay"),console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(v.a,{variant:"contained",style:{borderRadius:5},onClick:function(){window.confirm("Are you sure you want to check out?")&&n()},"aria-label":"view",children:"CheckOut"})},D=function(e){var t=e.items,n=Object(a.useState)(!1),c=Object(f.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)(0),s=Object(f.a)(i,2),l=s[0],d=s[1];return Object(a.useEffect)((function(){console.log(t),t.length>1&&(o(!0),d(t.reduce((function(e,t){return"number"===typeof e?Number(e)+Number(t.price)*t.quantity:Number(e.price)*e.quantity+Number(t.price)*t.quantity})))),1===t.length&&(o(!0),d(Number(t[0].price)*t[0].quantity)),t.length<1&&o(!1)}),[t]),Object(u.jsx)("div",{children:r?Object(u.jsx)(O.a,{style:{margin:20,padding:20},children:Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(u.jsx)("div",{style:{display:"flex",alignItems:"center"},children:Object(u.jsxs)(y.a,{variant:"h6",children:["Total: ",l]})}),Object(u.jsx)(w,{amount:l})]})}):""})},k=n(82),S=n.n(k),I=function(e){var t=e.itemData,n=e.index,a=(e.deleteItem,e.handleQuantityChange);return Object(u.jsx)(O.a,{style:{margin:10,padding:20},children:Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(u.jsx)("div",{style:{display:"flex",alignContent:"center"},children:Object(u.jsx)("img",{width:100,src:t.img_url,alt:"..."})}),Object(u.jsxs)("div",{style:{marginLeft:10},children:[Object(u.jsx)(y.a,{variant:"h6",children:Object(u.jsx)("b",{children:t.name})}),Object(u.jsxs)(y.a,{variant:"body1",children:["Price ",t.price]})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{style:{width:"115px"},children:Object(u.jsx)(S.a,{onChange:function(e){a(e,n)},value:t.quantity})})})]})})},_=n(180),C=n(179),P=n(181),R=n(182),q=n(83),B=n.n(q);function z(){return Object(u.jsx)(C.a,{sx:{flexGrow:1},children:Object(u.jsx)(_.a,{position:"static",children:Object(u.jsxs)(P.a,{children:[Object(u.jsx)(R.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(u.jsx)(B.a,{})}),Object(u.jsx)(y.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"CHEK"})]})})})}var N=n(84),E=n(85),A=n(90),L=n(89),F=n(42),T=n.n(F),H=function(e){Object(A.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c)))._onDetected=function(t){e.props.onDetected(t)},e}return Object(E.a)(n,[{key:"componentDidMount",value:function(){T.a.init({inputStream:{type:"LiveStream",target:document.querySelector("#barcode-scanner")},locator:{halfSample:!0,patchSize:"large",debug:{showCanvas:!0,showPatches:!1,showFoundPatches:!1,showSkeleton:!1,showLabels:!1,showPatchLabels:!1,showRemainingPatchLabels:!1,boxFromPatches:{showTransformed:!0,showTransformedBox:!0,showBB:!0}}},numOfWorkers:4,decoder:{readers:["code_128_reader"],debug:{drawBoundingBox:!0,showFrequency:!0,drawScanline:!0,showPattern:!0}},locate:!0},(function(e){if(e)return console.log(e);T.a.start()})),T.a.onDetected(this._onDetected)}},{key:"componentWillUnmount",value:function(){T.a.offDetected(this._onDetected)}},{key:"render",value:function(){return Object(u.jsxs)("div",{id:"barcode-scanner",children:[Object(u.jsx)("video",{style:{width:"100%",borderRadius:5},src:""}),Object(u.jsx)("canvas",{style:{display:"none"},className:"drawingBuffer"})]})}}]),n}(a.Component),G=function(e){var t=e.getItemID,n=e.items,c=Object(a.useState)([]),r=Object(f.a)(c,2),o=r[0],i=r[1];return Object(a.useEffect)((function(){var e=n.map((function(e){return e.barID}));i(e)}),[n]),Object(u.jsx)(H,{onDetected:function(e){o.includes(e.codeResult.code)||(i([].concat(Object(m.a)(o),[e.codeResult.code])),t(e.codeResult.code))}})};var J=function(e){var t=e.items,n=e.storeID,a=e.setItemData,c=function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return console.log("data read",t),e.prev=2,e.next=5,x.a.get("".concat("http://localhost:5000","/item/getItemData"),{headers:{item_id:t,store_id:n}});case 5:c=e.sent,console.log(Object(h.a)(Object(h.a)({},c.data.itemData),{},{barID:t})),a(Object(h.a)(Object(h.a)({},c.data.itemData),{},{barID:t})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),window.alert("Some error occured"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{style:{margin:20,textAlign:"center"},children:Object(u.jsx)(O.a,{style:{padding:5},children:Object(u.jsx)(G,{items:t,getItemID:c})})})},K=function(e){var t=e.name;return Object(u.jsx)("div",{style:{textAlign:"center",marginTop:20},children:Object(u.jsx)(y.a,{variant:"h5",children:Object(u.jsx)("b",{children:t})})})},M=function(e){var t=e.match.params.id,n=Object(a.useState)({}),c=Object(f.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)([]),s=Object(f.a)(i,2),l=s[0],d=s[1],p=function(e,t){if(0!==e){var n=l;n[t].quantity=e,d(n)}else O(t)},O=function(e){d(l.filter((function(t,n){return n!==e})))},y=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat("http://localhost:5000","/store/getStoreData"),{headers:{store_id:t}});case 3:n=e.sent,console.log(n.data.storeData),o(n.data.storeData),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),window.alert("Some error occured"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){y()}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(z,{}),Object(u.jsx)(K,{name:r.store_name}),Object(u.jsx)(J,{items:l,setItemData:function(e){l.map((function(e){return e.name})).includes(e.name)||d([].concat(Object(m.a)(l),[Object(h.a)(Object(h.a)({},e),{},{quantity:1})]))},storeID:t}),l.length>0?l.map((function(e,t){return Object(u.jsx)(I,{index:t,itemData:e,handleQuantityChange:p,deleteItem:O},t)})):"",Object(u.jsx)(D,{items:l})]})},Q=function(){return Object(u.jsx)(i.a,{children:Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{exact:!0,path:"/",component:function(){return Object(u.jsx)("h1",{children:"Home"})}}),Object(u.jsx)(s.a,{exact:!0,path:"/barcode",component:G}),Object(u.jsx)(s.a,{exact:!0,path:"/storeHome/:id",component:M}),Object(u.jsx)(s.a,{component:l})]})})};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(Q,{})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.8054ee27.chunk.js.map